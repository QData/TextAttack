============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-7.1.3, pluggy-1.0.0
rootdir: /Users/nanako/Desktop/Clinic/TextAttackHMC22-23, configfile: pytest.ini
plugins: xdist-2.5.0, forked-1.4.0, typeguard-2.13.3
collected 1 item

tests/test_command_line/test_list.py F                                   [100%]

=================================== FAILURES ===================================
_ test_command_line_list[list_augmentation_recipes-python -m eukaryote list augmentation-recipes-tests/sample_outputs/list_augmentation_recipes.txt] _

name = 'list_augmentation_recipes'
command = 'python -m eukaryote list augmentation-recipes'
sample_output_file = 'tests/sample_outputs/list_augmentation_recipes.txt'

    @pytest.mark.parametrize("name, command, sample_output_file", list_test_params)
    def test_command_line_list(name, command, sample_output_file):
        desired_text = open(sample_output_file).read().strip()
    
        # Run command and validate outputs.
        result = run_command_and_get_result(command)
    
        assert result.stdout is not None
        assert result.stderr is not None
    
        stdout = result.stdout.decode().strip()
        print("stdout =>", stdout)
        stderr = result.stderr.decode().strip()
        print("stderr =>", stderr)
    
>       assert stdout == desired_text
E       AssertionError: assert '\x1b[94mback...NetAugmenter)' == '\x1b[94mback...NetAugmenter)'
E         - [94mback_trans[0m (textattack.augmentation.BackTranslationAugmenter)
E         ?                        --------
E         + [94mback_trans[0m (eukaryote.augmentation.BackTranslationAugmenter)
E         ?                      +++++++
E         - [94mcharswap[0m (textattack.augmentation.CharSwapAugmenter)
E         ?                      --------
E         + [94mcharswap[0m (eukaryote.augmentation.CharSwapAugmenter)...
E         
E         ...Full output truncated (22 lines hidden), use '-vv' to show

tests/test_command_line/test_list.py:28: AssertionError
----------------------------- Captured stdout call -----------------------------
stdout => [94mback_trans[0m (eukaryote.augmentation.BackTranslationAugmenter)
[94mcharswap[0m (eukaryote.augmentation.CharSwapAugmenter)
[94mchecklist[0m (eukaryote.augmentation.CheckListAugmenter)
[94mclare[0m (eukaryote.augmentation.CLAREAugmenter)
[94meda[0m (eukaryote.augmentation.EasyDataAugmenter)
[94membedding[0m (eukaryote.augmentation.EmbeddingAugmenter)
[94mwordnet[0m (eukaryote.augmentation.WordNetAugmenter)
stderr => 2022-10-18 20:27:35.856772: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
=============================== warnings summary ===============================
../../../Library/Caches/pypoetry/virtualenvs/tats4aardvarks-main-XFS1g8C9-py3.7/lib/python3.7/site-packages/scipy/sparse/sparsetools.py:21
  /Users/nanako/Library/Caches/pypoetry/virtualenvs/tats4aardvarks-main-XFS1g8C9-py3.7/lib/python3.7/site-packages/scipy/sparse/sparsetools.py:21: DeprecationWarning: `scipy.sparse.sparsetools` is deprecated!
  scipy.sparse.sparsetools is a private module for scipy.sparse, and should not be used.
    _deprecated()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_command_line/test_list.py::test_command_line_list[list_augmentation_recipes-python -m eukaryote list augmentation-recipes-tests/sample_outputs/list_augmentation_recipes.txt]
======================== 1 failed, 1 warning in 22.23s =========================
============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-7.1.3, pluggy-1.0.0
rootdir: /Users/nanako/Desktop/Clinic/TextAttackHMC22-23, configfile: pytest.ini
plugins: xdist-2.5.0, forked-1.4.0, typeguard-2.13.3
collected 2 items

tests/test_command_line/test_loggers.py .F                               [100%]

=================================== FAILURES ===================================
_ test_logger[txt_logger-txt-python -m eukaryote attack --recipe deepwordbug --model lstm-mr --num-examples 2 --log-to-txt attack_log.txt-attack_log.txt-tests/sample_outputs/txt_attack_log.txt] _

name = 'txt_logger', filetype = 'txt'
command = 'python -m eukaryote attack --recipe deepwordbug --model lstm-mr --num-examples 2 --log-to-txt attack_log.txt'
test_log_file = 'attack_log.txt'
sample_log_file = 'tests/sample_outputs/txt_attack_log.txt'

    @pytest.mark.parametrize(
        "name, filetype, command, test_log_file, sample_log_file", list_test_params
    )
    def test_logger(name, filetype, command, test_log_file, sample_log_file):
        # Run command and validate outputs.
        result = run_command_and_get_result(command)
    
        assert result.stdout is not None
        assert result.stderr is not None
        assert result.returncode == 0
        assert os.path.exists(test_log_file), f"{test_log_file} did not get generated"
    
        if filetype == "json":
            with open(sample_log_file) as f:
                desired_dictionary = json.load(f)
    
            with open(test_log_file) as f:
                test_dictionary = json.load(f)
    
            assert (
                desired_dictionary == test_dictionary
            ), f"{filetype} file {test_log_file} differs from {sample_log_file}"
    
        elif filetype == "txt":
>           assert (
                os.system(f"diff {test_log_file} {sample_log_file}") == 0
            ), f"{filetype} file {test_log_file} differs from {sample_log_file}"
E           AssertionError: txt file attack_log.txt differs from tests/sample_outputs/txt_attack_log.txt
E           assert 256 == 0
E            +  where 256 = <built-in function system>('diff attack_log.txt tests/sample_outputs/txt_attack_log.txt')
E            +    where <built-in function system> = os.system

tests/test_command_line/test_loggers.py:71: AssertionError
----------------------------- Captured stdout call -----------------------------
6c6
< lovingly photographed in the manner of a golden book sprung to [[ife]] , stuart little 2 [[manager]] [[sweecness]] largely without stickiness .
---
> lovingly photographed in the manner of a golden book sprung to [[ife]] , stuart little 2 [[manager]] [[seetness]] largely without stickiness .
=============================== warnings summary ===============================
../../../Library/Caches/pypoetry/virtualenvs/tats4aardvarks-main-XFS1g8C9-py3.7/lib/python3.7/site-packages/scipy/sparse/sparsetools.py:21
  /Users/nanako/Library/Caches/pypoetry/virtualenvs/tats4aardvarks-main-XFS1g8C9-py3.7/lib/python3.7/site-packages/scipy/sparse/sparsetools.py:21: DeprecationWarning: `scipy.sparse.sparsetools` is deprecated!
  scipy.sparse.sparsetools is a private module for scipy.sparse, and should not be used.
    _deprecated()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_command_line/test_loggers.py::test_logger[txt_logger-txt-python -m eukaryote attack --recipe deepwordbug --model lstm-mr --num-examples 2 --log-to-txt attack_log.txt-attack_log.txt-tests/sample_outputs/txt_attack_log.txt]
============== 1 failed, 1 passed, 1 warning in 110.42s (0:01:50) ==============
============================= test session starts ==============================
platform darwin -- Python 3.7.1, pytest-7.1.3, pluggy-1.0.0
rootdir: /Users/nanako/Desktop/Clinic/TextAttackHMC22-23, configfile: pytest.ini
plugins: xdist-2.5.0, forked-1.4.0, typeguard-2.13.3
collected 1 item

tests/test_command_line/test_train.py .                                  [100%]

=============================== warnings summary ===============================
../../../Library/Caches/pypoetry/virtualenvs/tats4aardvarks-main-XFS1g8C9-py3.7/lib/python3.7/site-packages/scipy/sparse/sparsetools.py:21
  /Users/nanako/Library/Caches/pypoetry/virtualenvs/tats4aardvarks-main-XFS1g8C9-py3.7/lib/python3.7/site-packages/scipy/sparse/sparsetools.py:21: DeprecationWarning: `scipy.sparse.sparsetools` is deprecated!
  scipy.sparse.sparsetools is a private module for scipy.sparse, and should not be used.
    _deprecated()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================== 1 passed, 1 warning in 2980.36s (0:49:40) ===================
